<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mouse Click Tracker</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    button {
        margin: 5px;
    }
    #clickChartContainer {
        max-width: 50%; /* Adjust this value as needed */
        margin: auto;
    }
    #clickChart {
        width: 100%;
        height: auto;
    }
</style>
</head>
<body>
    <div id="clickChartContainer">
        <h1>Mouse Click Tracker</h1>
        <p>Set time between 5, 10, 20, or 60 seconds:</p>
        <select id="timeInterval">
            <option value="5">5 seconds</option>
            <option value="10">10 seconds</option>
            <option value="20">20 seconds</option>
            <option value="60">60 seconds</option>
        </select>
        <button onclick="startTracking()">Start</button>
        <button onclick="reset()">Reset</button>
        <p id="clickCounter">Clicks: 0</p>
        <p id="timeLeft"></p>
        <canvas id="clickChart"></canvas>
    </div>

    <script>
        let clickCount = 0;
        let interval;
        let timeLeft;
        let clickTimes = [];
        let startTime;
        let chart;

        function startTracking() {
            const selectedTime = parseInt(document.getElementById("timeInterval").value);
            clickCount = 0;
            clearInterval(interval);
            timeLeft = selectedTime;
            updateTimerDisplay();
            startTime = Date.now();
            interval = setInterval(updateTimer, 10);
            document.addEventListener("click", countClick);
            // Create or update chart
            if (chart) {
                chart.destroy();
            }
            createChart();
        }

        function reset() {
            clearInterval(interval);
            clickCount = 0;
            timeLeft = 0;
            clickTimes = [];
            updateClickCountDisplay();
            updateTimerDisplay();
            document.removeEventListener("click", countClick);
            // Destroy chart
            if (chart) {
                chart.destroy();
            }
        }

        function countClick() {
            clickCount++;
            clickTimes.push((Date.now() - startTime) / 1000); // Push time in seconds
            updateClickCountDisplay();
            updateChart();
        }

        function updateClickCountDisplay() {
            document.getElementById("clickCounter").innerText = `Clicks: ${clickCount}`;
        }

        function updateTimer() {
            timeLeft -= 0.01; // Decrease time by 10 milliseconds (0.01 seconds)
            updateTimerDisplay();
            if (timeLeft <= 0) {
                clearInterval(interval);
                rankSpeed();
            }
        }

        function updateTimerDisplay() {
            document.getElementById("timeLeft").innerText = `Time left: ${timeLeft.toFixed(2)} seconds`;
        }

        function rankSpeed() {
            let speed;
            if (clickCount <= 5) {
                speed = "Lightning Fast!";
            } else if (clickCount <= 10) {
                speed = "Very Fast";
            } else if (clickCount <= 20) {
                speed = "Fast";
            } else if (clickCount <= 40) {
                speed = "Moderate";
            } else {
                speed = "Slow";
            }
            alert(`You clicked ${clickCount} times! Your speed: ${speed}`);
        }

        function createChart() {
            const ctx = document.getElementById('clickChart').getContext('2d');
            chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Click Count',
                        data: [],
                        borderColor: 'rgba(255, 99, 132, 1)',
                        backgroundColor: 'rgba(255, 99, 132, 0.5)',
                        borderWidth: 1
                    }]
                },
                options: {
                    animation: {
                        duration: 0 // disable animation
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Time (s)'
                            }
                        }
                    }
                }
            });
        }

        function updateChart() {
            chart.data.labels = clickTimes; // Set time data as labels
            chart.data.datasets[0].data.push(clickTimes[clickTimes.length - 1]);
            chart.update();
        }
    </script>
</body>
</html>
